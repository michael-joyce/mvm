{% extends 'base.html.twig' %}

{% block title %}Archive{% endblock %}

{% block breadcrumb %}
    {% include 'partial/breadcrumb.html.twig' with {'index': 'archive', 'show': archive.label} %}
{% endblock %}

{% block pageheader %}
    {% include 'partial/term-index.html.twig' with {'term': archive} %}
{% endblock %}

{% block admin %}
    {% include 'partial/toolbar.html.twig' with {'id': archive.id, edit: 'archive_edit', 'delete': 'archive_delete'} %}
{% endblock %}

{% block body %}
    {% if is_granted('ROLE_USER') %}
        {% set ms=archive.manuscripts %}
    {% else %}
        {% set ms=archive.manuscripts|filter(m => m.complete) %}
    {% endif %}
    {% include 'manuscript/partial/gallery.html.twig' with {'manuscripts': ms|sort((a,b) => a.callNumber <=> b.callNumber)} %}
{% endblock %}
